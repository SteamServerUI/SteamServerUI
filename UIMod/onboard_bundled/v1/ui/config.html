<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Configuration</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/tabs.css">
    <link rel="stylesheet" href="/static/css/background.css">
    <link rel="stylesheet" href="/static/css/mobile.css">
    <link rel="stylesheet" href="/static/css/config.css">
    <link rel="stylesheet" href="/static/css/runfileterminal.css">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>

<body>
    <div id="space-background"></div>
    <header>
        <img src="/static/stationeers.png" alt="Stationeers Banner" id="banner">
    </header>
    <main>
        <h1>Customize your Installation</h1>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('runfile-config-tab')">
                    <span class="icon server-icon"></span>Runfile
                </button>
                <button class="tab-button" onclick="showTab('gameserver-config-tab')">
                    <span class="icon gameserver-icon"></span>GameServer
                </button>
                <button class="tab-button" onclick="showTab('server-config-tab')">
                    <span class="icon server-icon"></span>SSUI
                </button>
                <button class="tab-button" onclick="showTab('discord-config-tab')">
                    <span class="icon discord-icon"></span>Discord
                </button>
            </div>
        </div>

        <div id="gameserver-config-tab" class="tab-content">
            <div class="grid-container">
                <div class="config-sections">
                    <div class="section-navigation" id="runfile-group-nav">
                        <!-- Populated by runfile.js, e.g.:
                        <button class="section-nav-button" data-group="Basic">Basic</button>
                        -->
                    </div>
                    <div id="runfile-select-prompt" style="text-align: center; margin: 30px 0; color: var(--primary); font-family: 'Share Tech Mono', monospace;">
                        <h3>Please select a configuration section above</h3>
                    </div>
                    <form id="runfile-config-form">
                        <!-- Populated by runfile.js, e.g.:
                        <div id="Basic" class="config-section">
                            <h3 class="section-title">Basic GameServer Settings</h3>
                            <div class="channel-grid">
                                <div class="form-group">
                                    <label for="--port">Server Port</label>
                                    <input type="number" id="--port" data-flag="--port" value="8080" min="1024" max="65535">
                                    <div class="input-info">Port for game server</div>
                                </div>
                            </div>
                        </div>
                        -->
                        <div class="form-actions">
                            <button type="button" class="back-button" onclick="window.location.href = '/'"></button>
                        </div>
                    </form>
                    <div id="runfile-status" style="display: none; text-align: center; color: var(--primary);"></div>
                </div>
            </div>
        </div>

        <div id="server-config-tab" class="tab-content">
            <div class="grid-container">
                <div class="wizard-button-container">
                    <button class="wizard-button" onclick="window.location.href = '/setup'">
                        <span class="wizard-icon"></span>
                        <span class="wizard-text">Configuration Wizard</span>
                    </button>
                    <button class="wizard-button" onclick="window.location.href = '/detectionmanager'">
                        <span class="wizard-text">Detections Manager</span>
                    </button>
                </div>
                <div class="config-sections">
                    <div class="section-navigation" id="server-nav">
                        <!-- Populated by settings.js -->
                    </div>
                    <div id="select-prompt" style="text-align: center; margin: 30px 0; color: var(--primary); font-family: 'Share Tech Mono', monospace;">
                        <h3>Please select a configuration section above</h3>
                    </div>
                    <form id="server-config-form">
                        <!-- Populated by settings.js -->
                        <div class="form-actions">
                            <button type="button" class="back-button" onclick="window.location.href = '/'"></button>
                        </div>
                    </form>
                    <div id="server-status" style="display: none; text-align: center; color: var(--primary);"></div>
                </div>
            </div>
        </div>

        <div id="discord-config-tab" class="tab-content">
            <form id="discord-config-form" action="/saveconfigasjson" method="post">
                <div class="integration-status">
                    <label for="isDiscordEnabled" class="highlight-label">Discord Integration:</label>
                    <select id="isDiscordEnabled" name="isDiscordEnabled">
                        <option value="true" {{IsDiscordEnabledTrueSelected}}>ENABLED</option>
                        <option value="false" {{IsDiscordEnabledFalseSelected}}>DISABLED</option>
                    </select>
                    <div class="feature-badge">RECOMMENDED</div>
                </div>
            </br>
                <div class="discord-container">
                    <div class="form-group">
                        <label for="discordToken">Discord Bot Token:</label>
                        <input type="password" id="discordToken" name="discordToken" value="{{discordToken}}">
                        <div class="input-info">Your Discord bot's authentication token</div>
                    </div>
                    <h2>Channel Configuration</h2>
                    <div class="channel-grid">
                        <div class="form-group">
                            <label for="controlChannelID">Admin Command Channel:</label>
                            <input type="text" id="controlChannelID" name="controlChannelID" value="{{controlChannelID}}">
                            <div class="input-info">Channel for admin commands</div>
                        </div>
                        <div class="form-group">
                            <label for="controlPanelChannelID">Control Panel Channel:</label>
                            <input type="text" id="controlPanelChannelID" name="controlPanelChannelID"
                                value="{{controlPanelChannelID}}">
                            <div class="input-info">Channel for control panel</div>
                        </div>

                        <div class="form-group">
                            <label for="statusChannelID">Status Channel:</label>
                            <input type="text" id="statusChannelID" name="statusChannelID" value="{{statusChannelID}}">
                            <div class="input-info">Server status updates</div>
                        </div>

                        <div class="form-group">
                            <label for="connectionListChannelID">Connection List Channel:</label>
                            <input type="text" id="connectionListChannelID" name="connectionListChannelID"
                                value="{{connectionListChannelID}}">
                            <div class="input-info">Player connection tracking</div>
                        </div>

                        <div class="form-group">
                            <label for="logChannelID">Log Channel:</label>
                            <input type="text" id="logChannelID" name="logChannelID" value="{{logChannelID}}">
                            <div class="input-info">Server log output</div>
                        </div>

                        <div class="form-group">
                            <label for="saveChannelID">Save Info Channel:</label>
                            <input type="text" id="saveChannelID" name="saveChannelID" value="{{saveChannelID}}">
                            <div class="input-info">Save file information</div>
                        </div>

                        <div class="form-group">
                            <label for="errorChannelID">Error Channel:</label>
                            <input type="text" id="errorChannelID" name="errorChannelID" value="{{errorChannelID}}">
                            <div class="input-info">Server error messages</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="blackListFilePath">Banned Players List Path:</label>
                        <input type="text" id="blackListFilePath" name="blackListFilePath"
                            value="{{blackListFilePath}}">
                        <div class="input-info">File path to banned players list</div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="back-button" onclick="window.location.href = '/'"></button>
                        <button type="button" class="save-button" onclick="document.getElementById('discord-config-form').submit()"></button>
                    </div>
                </div>
            </form>
            <div class="info-panel">
                <h3>Discord Integration Benefits</h3>
                <ul class="feature-list">
                    <li>Monitor server status in real-time</li>
                    <li>Manage restarts and restores remotely</li>
                    <li>Track player connections</li>
                    <li>Community management options</li>
                    <li>Real-time error notifications</li>
                </ul>
                <p>For setup instructions, visit the <a href="https://github.com/SteamServerUI/SteamServerUI" target="_blank">GitHub repository</a></p>
            </div>
        </div>

        <div id="runfile-config-tab" class="tab-content active">
            <div class="grid-container">
                <h1 class="glitch-effect">Runfile Reset Terminal v1.2</h1>
                    
                    <div class="input-group">
                        <label for="gameInput" class="label">RUNFILE IDENTIFIER:</label>
                        <p> Make sure the runfile is located in the <code>runfiles</code> folder or else this operation will fail, resulting in bascially just running SteamCMD setup again. (Can also be used for exactly this purpose)</p>
                        <p> This will reload the runfile, game, start the SteamCMD setup and then respond, monitoring the console for setup progress is recommended.</p>
                        <input type="text" id="gameInput" placeholder="Enter game name" autocomplete="off">
                    </div>
                    
                    <div class="button-container">
                        <button onclick="sendReset()" class="reset-button">INITIATE RELOAD</button>
                    </div>
                    <div id="runfile-init-status" style="display: none; text-align: center; color: var(--primary);"></div>
            </div>
        </div>

    </main>
    <footer>
        <div class="copyright">Copyright © 2025 <a href="https://github.com/jacksonthemaster">JacksonTheMaster.</a>
            Licensed under <a href="https://github.com/SteamServerUI/SteamServerUI/blob/main/LICENSE">Propirietary License</a>.</div>
    </footer>

    <script src="/static/js/config.js"></script>
    <script src="/static/js/runfile-settings.js"></script>
    <script src="/static/js/runfile-terminal.js"></script>
    <script src="/static/js/settings.js"></script>
    <script src="/static/js/main.js"></script>
</body>

</html>